<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SFCC Ops Dashboard</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;700&display=swap" rel="stylesheet">
    
    <!-- Babel for in-browser transpilation -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Tailwind Config -->
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              ops: {
                bg: '#191818',       // Darkest
                surface: '#252525',  // Dark Surface
                slate: '#5f686e',    // Mid-tone (Borders, Muted text)
                light: '#96a3ae',    // Light (Primary Text, Icons)
                white: '#c7d7e2',    // Lightest (Headings, Highlights)
              }
            },
            fontFamily: {
              sans: ['Inter', 'sans-serif'],
              mono: ['JetBrains Mono', 'monospace'],
            }
          }
        }
      }
    </script>
    
    <style>
      body {
        background-color: #191818;
        color: #c7d7e2;
      }
      /* Custom Scrollbar */
      ::-webkit-scrollbar {
        width: 8px;
        height: 8px;
      }
      ::-webkit-scrollbar-track {
        background: #191818; 
      }
      ::-webkit-scrollbar-thumb {
        background: #252525; 
        border: 1px solid #5f686e;
        border-radius: 4px;
      }
      ::-webkit-scrollbar-thumb:hover {
        background: #5f686e;
      }
      .animate-fade-in {
        animation: fadeIn 0.5s ease-out;
      }
      @keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
      }
    </style>
<script type="importmap">
{
  "imports": {
    "react": "https://aistudiocdn.com/react@^19.2.0",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.0/",
    "react/": "https://aistudiocdn.com/react@^19.2.0/",
    "lucide-react": "https://aistudiocdn.com/lucide-react@^0.555.0",
    "recharts": "https://aistudiocdn.com/recharts@^3.5.1"
  }
}
</script>
</head>
<body>
    <div id="root"></div>

    <!-- Application Script with data-type="module" to enable imports -->
    <script type="text/babel" data-type="module">
        import React, { useState } from 'https://esm.sh/react@18.2.0';
        import { createRoot } from 'https://esm.sh/react-dom@18.2.0/client';
        import { 
            Shield, Users, FileText, AlertTriangle, CheckCircle, BarChart3, 
            Calendar, Lock, ChevronRight, Menu, X, UserCheck, Flag, 
            LayoutDashboard, Award, Clock, ChevronUp 
        } from 'https://esm.sh/lucide-react@0.292.0';
        import { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer } from 'https://esm.sh/recharts@2.10.1?deps=react@18.2.0,react-dom@18.2.0';

        // --- CONSTANTS & MOCK DATA ---
        const USERS = [
          { id: 'u1', name: 'Gen. A. Smith', role: 'HQ', title: 'Chief of Operations' },
          { id: 'u2', name: 'Col. B. Miller', role: 'Regional', region: 'North-East' },
          { id: 'u3', name: 'Maj. C. Davis', role: 'Squadron', unit: 'SQ-101' },
          { id: 'u4', name: 'Cdt. E. Ender', role: 'Cadet', unit: 'SQ-101', grade: 'C/SSgt' },
          { id: 'u5', name: 'Mrs. Ender', role: 'Parent', cadetId: 'u4' },
        ];

        const ARTIFACTS = [
          { id: 101, cadetName: 'Cdt. E. Ender', loe: 'STEM', title: 'Rocketry Lab Report', score: 3, status: 'Approved', safetyCheck: true, boardReady: true, date: '2023-10-01' },
          { id: 102, cadetName: 'Cdt. E. Ender', loe: 'Leadership', title: 'Squadron Drill Cmd', score: 1, status: 'Returned', safetyCheck: true, boardReady: false, date: '2023-10-05' },
          { id: 103, cadetName: 'Cdt. J. Doe', loe: 'Fitness', title: '1 Mile Run Log', score: 0, status: 'Submitted', safetyCheck: false, boardReady: false, date: '2023-10-10' },
          { id: 104, cadetName: 'Cdt. E. Ender', loe: 'Service', title: 'Community Cleanup', score: 4, status: 'Approved', safetyCheck: true, boardReady: true, date: '2023-09-15' },
          { id: 105, cadetName: 'Cdt. A. Smith', loe: 'STEM', title: 'Cyber Security Basics', score: 2, status: 'Submitted', safetyCheck: true, boardReady: false, date: '2023-10-12' },
        ];

        const EVENTS = [
          { id: 1, title: 'Regional FTX (MTE)', date: '2023-11-10', type: 'MTE', recovery: true },
          { id: 2, title: 'Squadron Meeting', date: '2023-11-15', type: 'Regular', recovery: false },
          { id: 3, title: 'Annual Inspection', date: '2023-12-01', type: 'MTE', recovery: true },
        ];

        const CADET_PROFILE = {
          joinDate: 'Aug 15, 2022',
          promotions: [
            { rank: 'C/SSgt', name: 'Staff Sergeant', date: 'Oct 01, 2023', active: true },
            { rank: 'C/SrA', name: 'Senior Airman', date: 'Feb 15, 2023' },
            { rank: 'C/Amn', name: 'Airman', date: 'Sep 01, 2022' }
          ],
          awards: [
            { name: 'Honor Flight Ribbon', earned: true, date: '2023-06-10', color: 'bg-yellow-600', type: 'Service' },
            { name: 'Physical Excellence', earned: true, date: '2022-12-10', color: 'bg-green-600', type: 'Fitness' },
            { name: 'Leadership Basics', earned: true, date: '2022-09-30', color: 'bg-blue-600', type: 'Leadership' },
            { name: 'Cyber Badge', earned: false, progress: 80, color: 'bg-indigo-600', type: 'STEM' },
            { name: 'Community Service', earned: false, progress: 45, color: 'bg-red-600', type: 'Service' }
          ]
        };

        // --- COMPONENTS ---
        
        const Card = ({ children, className = '' }) => (
            <div className={`bg-ops-surface border border-ops-slate/30 rounded-none shadow-lg p-5 ${className}`}>
                {children}
            </div>
        );

        const StatCard = ({ title, value, subtext, icon: Icon, alert = false }) => (
            <Card className="flex items-center space-x-4 border-l-4 border-l-ops-light">
                <div className={`p-3 rounded-sm ${alert ? 'bg-red-900/20 text-red-400' : 'bg-ops-slate/20 text-ops-light'}`}>
                    <Icon className="w-6 h-6" />
                </div>
                <div>
                    <h3 className="text-ops-slate text-xs uppercase tracking-wider font-semibold font-mono">{title}</h3>
                    <div className="text-2xl font-bold text-ops-white font-mono">{value}</div>
                    {subtext && <div className="text-xs text-ops-light mt-1">{subtext}</div>}
                </div>
            </Card>
        );

        const Badge = ({ status, score }) => {
            let colorClass = 'bg-ops-slate/20 text-ops-slate border-ops-slate';
            if (status === 'Approved') colorClass = 'bg-emerald-900/20 text-emerald-400 border-emerald-800';
            if (status === 'Returned' || (score !== null && score < 2)) colorClass = 'bg-red-900/20 text-red-400 border-red-800';
            if (status === 'Submitted') colorClass = 'bg-amber-900/20 text-amber-400 border-amber-800';

            return (
                <span className={`px-2 py-0.5 border text-xs font-mono uppercase tracking-wider rounded-sm ${colorClass}`}>
                    {status}
                </span>
            );
        };

        // --- VIEWS ---

        const HQView = () => {
            const data = [
                { name: 'North', value: 92 },
                { name: 'South', value: 88 },
                { name: 'Central', value: 65 },
                { name: 'West', value: 95 },
            ];
            const remediationRate = Math.round((ARTIFACTS.filter(a => a.score !== null && a.score < 2).length / ARTIFACTS.length) * 100);

            return (
                <div className="space-y-6 animate-fade-in">
                    <div className="grid grid-cols-1 md:grid-cols-4 gap-4">
                        <StatCard title="Total Cadets" value="1,240" subtext="+12% YoY Growth" icon={Users} />
                        <StatCard title="Compliance Rate" value="94%" subtext="Q3 Reports Submitted" icon={Shield} />
                        <StatCard title="Remediation Rate" value={`${remediationRate}%`} subtext="Artifacts Scoring < 2" icon={AlertTriangle} alert={remediationRate > 15} />
                        <StatCard title="Waiver Logs" value="3" subtext="Pending Approval" icon={FileText} />
                    </div>

                    <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <Card className="h-96">
                            <h3 className="text-lg font-bold text-ops-white mb-6 flex items-center">
                                <BarChart3 className="w-5 h-5 mr-2 text-ops-light" />
                                National Compliance Heatmap
                            </h3>
                            <ResponsiveContainer width="100%" height="80%">
                                <BarChart data={data} layout="vertical">
                                    <CartesianGrid strokeDasharray="3 3" stroke="#252525" />
                                    <XAxis type="number" stroke="#5f686e" />
                                    <YAxis dataKey="name" type="category" stroke="#96a3ae" width={60} />
                                    <Tooltip 
                                        contentStyle={{ backgroundColor: '#252525', borderColor: '#5f686e', color: '#c7d7e2' }}
                                        itemStyle={{ color: '#c7d7e2' }}
                                    />
                                    <Bar dataKey="value" fill="#96a3ae" barSize={20} radius={[0, 4, 4, 0]} />
                                </BarChart>
                            </ResponsiveContainer>
                        </Card>

                        <Card>
                            <h3 className="text-lg font-bold text-ops-white mb-4 flex items-center">
                                <AlertTriangle className="w-5 h-5 mr-2 text-ops-light" />
                                Critical Risk / Waiver Log
                            </h3>
                            <table className="w-full text-left text-sm">
                                <thead>
                                    <tr className="text-ops-slate border-b border-ops-slate/30">
                                        <th className="pb-2 font-mono uppercase text-xs">Unit</th>
                                        <th className="pb-2 font-mono uppercase text-xs">Issue</th>
                                        <th className="pb-2 font-mono uppercase text-xs">Risk Level</th>
                                    </tr>
                                </thead>
                                <tbody className="text-ops-light">
                                    <tr className="border-b border-ops-surface">
                                        <td className="py-3">SQ-404</td>
                                        <td>Missing Youth Protection Certs</td>
                                        <td className="text-red-400 font-bold">HIGH</td>
                                    </tr>
                                    <tr className="border-b border-ops-surface">
                                        <td className="py-3">SQ-102</td>
                                        <td>Safety Ratio Waiver Request</td>
                                        <td className="text-amber-400 font-bold">MED</td>
                                    </tr>
                                    <tr className="border-b border-ops-surface">
                                        <td className="py-3">SQ-305</td>
                                        <td>Equipment Audit Failure</td>
                                        <td className="text-red-400 font-bold">HIGH</td>
                                    </tr>
                                </tbody>
                            </table>
                        </Card>
                    </div>
                </div>
            );
        };

        const CadetView = () => {
            const myArtifacts = ARTIFACTS.filter(a => a.cadetName === 'Cdt. E. Ender');
            const remediationItems = myArtifacts.filter(a => a.score !== null && a.score < 2);
            const currentRank = CADET_PROFILE.promotions.find(p => p.active);

            return (
                <div className="space-y-6 animate-fade-in">
                    <Card className="p-0 overflow-hidden">
                        <div className="flex flex-col md:flex-row">
                            <div className="w-full md:w-64 bg-ops-surface p-6 flex flex-col items-center border-b md:border-b-0 md:border-r border-ops-slate/30">
                                <div className="relative mb-4">
                                    <img 
                                        src="https://placehold.co/150x200/334155/white?text=Cadet" 
                                        alt="Cadet" 
                                        className="w-32 h-40 object-cover rounded-sm border-2 border-ops-slate"
                                    />
                                    <div className="absolute -bottom-3 -right-3 w-12 h-12 bg-ops-bg border-2 border-ops-slate rounded-full flex items-center justify-center">
                                        <span className="text-xs font-bold text-ops-white">{currentRank?.rank.split('/')[1]}</span>
                                    </div>
                                </div>
                                <div className="text-center">
                                    <h2 className="text-xl font-bold text-ops-white font-mono">{currentRank?.rank}</h2>
                                    <p className="text-xs text-ops-light uppercase tracking-widest">{currentRank?.name}</p>
                                </div>
                            </div>
                            
                            <div className="flex-1 p-6">
                                <div className="flex justify-between items-start mb-6">
                                    <div>
                                        <h2 className="text-3xl font-bold text-ops-white">Cadet E. Ender</h2>
                                        <div className="flex items-center text-ops-slate mt-1 space-x-4 text-sm font-mono">
                                            <span>SQ-101</span>
                                            <span>JOINED {CADET_PROFILE.joinDate.toUpperCase()}</span>
                                        </div>
                                    </div>
                                    <div className="hidden md:block text-right">
                                        <div className="text-xs text-ops-slate uppercase tracking-wider">Next Evaluation</div>
                                        <div className="text-lg font-mono text-ops-white">DEC 15, 2023</div>
                                    </div>
                                </div>

                                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div className="bg-ops-bg/50 p-4 border border-ops-slate/30">
                                        <h4 className="text-xs font-bold text-ops-light uppercase tracking-wider mb-4 flex items-center">
                                            <ChevronUp className="w-4 h-4 mr-1" /> Promotion Log
                                        </h4>
                                        <div className="space-y-4 border-l-2 border-ops-slate ml-2 pl-4 relative">
                                            {CADET_PROFILE.promotions.map((p, idx) => (
                                                <div key={idx} className="relative">
                                                    <div className={`absolute -left-[23px] top-1 w-3 h-3 rounded-full border-2 border-ops-bg ${p.active ? 'bg-ops-light' : 'bg-ops-slate'}`}></div>
                                                    <div className="flex justify-between items-center">
                                                        <span className={`font-mono text-sm ${p.active ? 'text-ops-white font-bold' : 'text-ops-slate'}`}>{p.rank}</span>
                                                        <span className="text-xs text-ops-slate">{p.date}</span>
                                                    </div>
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                    
                                    <div className="bg-ops-bg/50 p-4 border border-ops-slate/30">
                                        <h4 className="text-xs font-bold text-ops-light uppercase tracking-wider mb-4 flex items-center">
                                            <Award className="w-4 h-4 mr-1" /> Awards
                                        </h4>
                                        <div className="flex flex-wrap gap-2 mb-4">
                                            {CADET_PROFILE.awards.filter(a => a.earned).map((award, i) => (
                                                <div key={i} className={`h-6 w-8 ${award.color} border border-black/50 shadow-sm`} title={award.name}></div>
                                            ))}
                                        </div>
                                        <div className="space-y-2">
                                            {CADET_PROFILE.awards.filter(a => !a.earned).map((award, i) => (
                                                <div key={i}>
                                                    <div className="flex justify-between text-[10px] uppercase tracking-wide mb-1 text-ops-slate">
                                                        <span>{award.name}</span>
                                                        <span>{award.progress}%</span>
                                                    </div>
                                                    <div className="h-1.5 w-full bg-ops-surface rounded-full overflow-hidden">
                                                        <div className={`h-full ${award.color}`} style={{width: `${award.progress}%`}}></div>
                                                    </div>
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </Card>

                    {remediationItems.length > 0 && (
                        <div className="bg-red-900/10 border border-red-800 p-4 flex items-start">
                            <AlertTriangle className="text-red-400 w-5 h-5 mr-3 mt-0.5" />
                            <div>
                                <h4 className="text-red-400 font-bold text-sm uppercase tracking-wider">Action Required: Remediation</h4>
                                <p className="text-red-200/70 text-sm mt-1">
                                    You have {remediationItems.length} artifact(s) that scored below the minimum (2/4). Please revise and resubmit per CCR 20-7.
                                </p>
                            </div>
                        </div>
                    )}

                    <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <Card className="md:col-span-2">
                            <h3 className="text-ops-light font-bold uppercase text-sm mb-4">Promotion Requirements</h3>
                            <div className="space-y-6">
                                <div>
                                    <div className="flex justify-between text-sm text-ops-light mb-2">
                                        <span>STEM Requirements</span>
                                        <span className="font-mono text-ops-white">2/3</span>
                                    </div>
                                    <div className="h-2 bg-ops-bg border border-ops-slate/30 overflow-hidden">
                                        <div className="h-full bg-ops-light" style={{ width: '66%' }}></div>
                                    </div>
                                </div>
                                <div>
                                    <div className="flex justify-between text-sm text-ops-light mb-2">
                                        <span>Leadership Logs</span>
                                        <span className="font-mono text-ops-white">4/5</span>
                                    </div>
                                    <div className="h-2 bg-ops-bg border border-ops-slate/30 overflow-hidden">
                                        <div className="h-full bg-ops-light" style={{ width: '80%' }}></div>
                                    </div>
                                </div>
                            </div>
                        </Card>

                        <Card className="bg-gradient-to-br from-ops-surface to-ops-bg">
                            <h3 className="text-ops-slate text-xs uppercase mb-2 font-bold">Next Major Event</h3>
                            <div className="text-xl font-bold text-ops-white mb-1">Regional FTX</div>
                            <div className="text-ops-light flex items-center mb-4 text-sm font-mono">
                                <Calendar className="w-4 h-4 mr-2" /> NOV 10, 2023
                            </div>
                            <div className="bg-emerald-900/10 text-emerald-400 px-3 py-2 border border-emerald-900/50 flex items-center text-xs">
                                <CheckCircle className="w-3 h-3 mr-2" /> Recovery Period Confirmed
                            </div>
                        </Card>
                    </div>

                    <Card>
                        <h3 className="text-lg font-bold text-ops-white mb-4">My Evidence Portfolio</h3>
                        <div className="overflow-x-auto">
                            <table className="w-full text-left text-sm text-ops-light">
                                <thead>
                                    <tr className="border-b border-ops-slate/30 text-ops-slate">
                                        <th className="pb-2 font-mono uppercase text-xs">LOE</th>
                                        <th className="pb-2 font-mono uppercase text-xs">Title</th>
                                        <th className="pb-2 font-mono uppercase text-xs">Status</th>
                                        <th className="pb-2 text-right font-mono uppercase text-xs">Score</th>
                                    </tr>
                                </thead>
                                <tbody className="divide-y divide-ops-slate/20">
                                    {myArtifacts.map(a => (
                                        <tr key={a.id}>
                                            <td className="py-3">
                                                <span className="bg-ops-bg border border-ops-slate/30 text-ops-slate text-[10px] px-2 py-1 rounded-sm uppercase tracking-wider">
                                                    {a.loe}
                                                </span>
                                            </td>
                                            <td className="font-medium text-ops-white">{a.title}</td>
                                            <td><Badge status={a.status} score={a.score} /></td>
                                            <td className="text-right font-mono text-ops-white">{a.score ?? '-'}</td>
                                        </tr>
                                    ))}
                                </tbody>
                            </table>
                        </div>
                    </Card>
                </div>
            );
        };

        const RegionalView = () => {
            const regionalSquadrons = ['SQ-101', 'SQ-102', 'SQ-205', 'SQ-304'];
            const totalSquadrons = regionalSquadrons.length;
            const regionalArtifacts = ARTIFACTS; 
            const pendingReviews = regionalArtifacts.filter(a => a.status === 'Submitted' || a.status === 'Returned').length;
            const nextMTE = EVENTS.find(e => e.type === 'MTE');
            const regionalCompliance = 88;

            const squadronData = regionalSquadrons.map(unit => ({
                unit,
                compliance: unit === 'SQ-102' ? 75 : (Math.random() * 10 + 85).toFixed(0),
                pending: Math.floor(Math.random() * 5),
                risk: unit === 'SQ-102' ? 'High' : 'Low'
            }));

            return (
                <div className="space-y-6 animate-fade-in">
                    <div className="grid grid-cols-1 md:grid-cols-4 gap-4">
                        <StatCard title="Total Squadrons" value={totalSquadrons.toString()} subtext="North-East Region" icon={Flag} />
                        <StatCard title="Regional Compliance" value={`${regionalCompliance}%`} subtext="Avg Approval Rate" icon={Shield} />
                        <StatCard title="Pending Reviews" value={pendingReviews.toString()} subtext="Across all units" icon={FileText} />
                        <StatCard title="Next Major Event" value={nextMTE?.date.slice(5) || ''} subtext={nextMTE?.title} icon={Calendar} alert />
                    </div>

                    <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <Card className="lg:col-span-2">
                            <h3 className="text-lg font-bold text-ops-white mb-4 flex items-center">
                                <LayoutDashboard className="w-5 h-5 mr-2 text-ops-light" />
                                Squadron Performance Overview
                            </h3>
                            <table className="w-full text-left text-sm">
                                <thead>
                                    <tr className="text-ops-slate border-b border-ops-slate/30">
                                        <th className="pb-2 font-mono uppercase text-xs">Unit</th>
                                        <th className="pb-2 font-mono uppercase text-xs">Compliance %</th>
                                        <th className="pb-2 font-mono uppercase text-xs">Artifacts</th>
                                        <th className="pb-2 text-right font-mono uppercase text-xs">Risk</th>
                                    </tr>
                                </thead>
                                <tbody className="text-ops-light divide-y divide-ops-slate/20">
                                    {squadronData.map(d => (
                                        <tr key={d.unit}>
                                            <td className="py-3 font-mono text-ops-white">{d.unit}</td>
                                            <td>
                                                <span className={d.risk === 'High' ? 'text-red-400' : 'text-emerald-400'}>{d.compliance}%</span>
                                            </td>
                                            <td>{d.pending}</td>
                                            <td className="text-right">
                                                <span className={`px-2 py-0.5 text-[10px] uppercase font-bold border ${d.risk === 'High' ? 'border-red-800 text-red-400 bg-red-900/20' : 'border-emerald-800 text-emerald-400 bg-emerald-900/20'}`}>
                                                    {d.risk}
                                                </span>
                                            </td>
                                        </tr>
                                    ))}
                                </tbody>
                            </table>
                        </Card>

                        <Card>
                            <h3 className="text-lg font-bold text-ops-white mb-4 flex items-center">
                                <Calendar className="w-5 h-5 mr-2 text-ops-light" />
                                Regional Schedule
                            </h3>
                            <div className="space-y-4">
                                {EVENTS.map(e => (
                                    <div key={e.id} className="border-l-2 border-ops-slate pl-4">
                                        <div className="text-[10px] text-ops-slate uppercase tracking-wider font-bold">{e.type}</div>
                                        <div className="text-sm font-medium text-ops-white">{e.title}</div>
                                        <div className="text-xs text-ops-light font-mono mt-0.5">{e.date}</div>
                                    </div>
                                ))}
                            </div>
                        </Card>
                    </div>
                </div>
            );
        };

        const SquadronView = () => {
            const artifactsForReview = ARTIFACTS.filter(a => a.status === 'Submitted' || a.status === 'Returned');
            const pendingCount = artifactsForReview.filter(a => a.status === 'Submitted').length;
            const remediationCount = artifactsForReview.filter(a => a.status === 'Returned').length;

            return (
                <div className="space-y-6 animate-fade-in">
                    <div className="grid grid-cols-1 md:grid-cols-4 gap-4">
                        <StatCard title="Total Cadets" value="42" subtext="Active in SQ-101" icon={Users} />
                        <StatCard title="New Submissions" value={pendingCount.toString()} subtext="Awaiting Review" icon={FileText} />
                        <StatCard title="Remediation Items" value={remediationCount.toString()} subtext="Needs attention" icon={AlertTriangle} alert={remediationCount > 0} />
                        <StatCard title="Board Ready" value="1/2" subtext="Eligible Promotables" icon={Award} />
                    </div>

                    <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <Card className="lg:col-span-2">
                            <h3 className="text-lg font-bold text-ops-white mb-4 flex items-center">
                                <FileText className="w-5 h-5 mr-2 text-ops-light" />
                                Artifact Review Queue
                            </h3>
                            <div className="overflow-x-auto">
                                <table className="w-full text-left text-sm">
                                    <thead>
                                        <tr className="text-ops-slate border-b border-ops-slate/30">
                                            <th className="pb-2 font-mono uppercase text-xs">Cadet</th>
                                            <th className="pb-2 font-mono uppercase text-xs">Artifact</th>
                                            <th className="pb-2 font-mono uppercase text-xs">Date</th>
                                            <th className="pb-2 font-mono uppercase text-xs text-center">Status</th>
                                        </tr>
                                    </thead>
                                    <tbody className="text-ops-light divide-y divide-ops-slate/20">
                                        {artifactsForReview.map(a => (
                                            <tr key={a.id}>
                                                <td className="py-3 font-medium text-ops-white">{a.cadetName}</td>
                                                <td>{a.title}</td>
                                                <td className="font-mono text-xs">{a.date.slice(5)}</td>
                                                <td className="text-center"><Badge status={a.status} score={a.score} /></td>
                                            </tr>
                                        ))}
                                    </tbody>
                                </table>
                            </div>
                        </Card>

                        <Card>
                            <h3 className="text-lg font-bold text-ops-white mb-4">Quick Actions</h3>
                            <div className="space-y-3">
                                {[
                                    { icon: UserCheck, text: 'Update Roster Status' },
                                    { icon: Award, text: 'Recommend Promotion Board' },
                                    { icon: Calendar, text: 'Log Event Attendance' }
                                ].map((action, i) => (
                                    <button key={i} className="w-full text-left p-3 rounded-sm border border-ops-slate/30 bg-ops-bg/50 hover:bg-ops-slate/10 text-ops-light flex items-center transition-colors">
                                        <action.icon className="w-4 h-4 mr-3" />
                                        <span className="text-sm font-medium">{action.text}</span>
                                    </button>
                                ))}
                            </div>
                        </Card>
                    </div>
                </div>
            );
        };

        const ParentView = ({ cadetId }) => {
            const cadet = USERS.find(u => u.id === cadetId);
            const myArtifacts = ARTIFACTS.filter(a => cadet && a.cadetName === cadet.name);
            const approvedCount = myArtifacts.filter(a => a.status === 'Approved').length;
            const remediationItems = myArtifacts.filter(a => a.score !== null && a.score < 2);
            const currentRank = CADET_PROFILE.promotions.find(p => p.active);

            if (!cadet) return <div className="text-red-400 p-4 border border-red-800 bg-red-900/20">Cadet profile not found.</div>;

            return (
                <div className="space-y-6 animate-fade-in">
                    <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <StatCard title="Cadet Rank" value={currentRank?.rank || 'N/A'} subtext={currentRank?.name} icon={Award} />
                        <StatCard title="Approved Artifacts" value={approvedCount.toString()} subtext="Evidence Items" icon={CheckCircle} />
                        <StatCard title="Pending Action" value={remediationItems.length.toString()} subtext="Items needing attention" icon={AlertTriangle} alert={remediationItems.length > 0} />
                    </div>

                    <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <Card className="lg:col-span-2">
                            <h3 className="text-lg font-bold text-ops-white mb-4 flex items-center">
                                <FileText className="w-5 h-5 mr-2 text-ops-light" />
                                {cadet.name}'s Progress Log
                            </h3>
                            <div className="overflow-x-auto">
                                <table className="w-full text-left text-sm">
                                    <thead>
                                        <tr className="text-ops-slate border-b border-ops-slate/30">
                                            <th className="pb-2 font-mono uppercase text-xs">LOE</th>
                                            <th className="pb-2 font-mono uppercase text-xs">Title</th>
                                            <th className="pb-2 font-mono uppercase text-xs">Status</th>
                                            <th className="pb-2 font-mono uppercase text-xs text-right">Score</th>
                                        </tr>
                                    </thead>
                                    <tbody className="text-ops-light divide-y divide-ops-slate/20">
                                        {myArtifacts.map(a => (
                                            <tr key={a.id}>
                                                <td className="py-3">
                                                    <span className="bg-ops-bg border border-ops-slate/30 text-ops-slate text-[10px] px-2 py-1 rounded-sm uppercase tracking-wider">
                                                        {a.loe}
                                                    </span>
                                                </td>
                                                <td>{a.title}</td>
                                                <td><Badge status={a.status} score={a.score} /></td>
                                                <td className="text-right font-mono text-ops-white">{a.score ?? '-'}</td>
                                            </tr>
                                        ))}
                                    </tbody>
                                </table>
                            </div>
                        </Card>

                        <Card>
                            <h3 className="text-lg font-bold text-ops-white mb-4">Squadron Contact</h3>
                            <div className="space-y-4">
                                <div>
                                    <div className="text-xs text-ops-slate uppercase tracking-wider font-bold">Unit Leader</div>
                                    <div className="text-ops-white font-medium">Maj. C. Davis</div>
                                </div>
                                <div>
                                    <div className="text-xs text-ops-slate uppercase tracking-wider font-bold">Unit</div>
                                    <div className="text-ops-white font-medium">{cadet.unit}</div>
                                </div>
                                <button className="w-full p-3 mt-2 bg-ops-light hover:bg-ops-white text-ops-bg font-bold uppercase text-sm tracking-wide transition-colors flex items-center justify-center rounded-sm">
                                    <ChevronRight className="w-4 h-4 mr-2" /> Request Update
                                </button>
                            </div>
                        </Card>
                    </div>
                </div>
            );
        };

        const App = () => {
            const [currentUser, setCurrentUser] = useState(USERS[0]);
            const [isSidebarOpen, setIsSidebarOpen] = useState(false);

            const renderView = () => {
                switch (currentUser.role) {
                    case 'HQ': return <HQView />;
                    case 'Cadet': return <CadetView />;
                    case 'Regional': return <RegionalView />;
                    case 'Squadron': return <SquadronView />;
                    case 'Parent': return <ParentView cadetId={currentUser.cadetId} />;
                    default: return <div className="text-ops-light">Role not found</div>;
                }
            };

            return (
                <div className="flex h-screen overflow-hidden bg-ops-bg text-ops-light selection:bg-ops-light selection:text-ops-bg font-sans">
                    
                    {/* Mobile Header */}
                    <div className="lg:hidden fixed w-full z-20 flex items-center justify-between p-4 bg-ops-surface border-b border-ops-slate/30">
                        <div className="flex items-center space-x-2">
                            <div className="w-8 h-8 bg-ops-light text-ops-bg flex items-center justify-center font-bold rounded-sm">SF</div>
                            <span className="font-bold tracking-wider text-ops-white">SFCC OPS</span>
                        </div>
                        <button onClick={() => setIsSidebarOpen(!isSidebarOpen)} className="text-ops-white">
                            {isSidebarOpen ? <X /> : <Menu />}
                        </button>
                    </div>

                    {/* Sidebar */}
                    <aside 
                        className={`fixed inset-y-0 left-0 z-10 w-64 bg-ops-surface border-r border-ops-slate/30 transform transition-transform lg:translate-x-0 lg:static flex flex-col ${isSidebarOpen ? 'translate-x-0' : '-translate-x-full'}`}
                    >
                        <div className="p-6 mt-14 lg:mt-0 flex items-center space-x-3">
                            <div className="w-10 h-10 bg-gradient-to-br from-ops-slate to-ops-surface border border-ops-light flex items-center justify-center shadow-lg">
                                <Shield className="text-ops-light w-5 h-5" />
                            </div>
                            <div>
                                <h1 className="font-bold text-lg tracking-wider text-ops-white leading-tight font-mono">
                                    SFCC<br/>
                                    <span className="text-ops-slate text-xs font-normal uppercase">Command Suite</span>
                                </h1>
                            </div>
                        </div>

                        <nav className="flex-1 px-4 space-y-2 mt-4">
                            <div className="text-[10px] font-bold text-ops-slate uppercase tracking-widest mb-2 px-4">Role Simulator</div>
                            {USERS.map(user => (
                                <button
                                    key={user.id}
                                    onClick={() => {
                                        setCurrentUser(user);
                                        setIsSidebarOpen(false);
                                    }}
                                    className={`w-full flex items-center space-x-3 px-4 py-3 rounded-sm transition-all border-l-2 ${
                                        currentUser.id === user.id 
                                            ? 'bg-ops-bg border-ops-light text-ops-white' 
                                            : 'border-transparent text-ops-slate hover:text-ops-light hover:bg-ops-bg/50'
                                    }`}
                                >
                                    <UserCheck className="w-4 h-4" />
                                    <span className="font-medium text-sm">{user.role} View</span>
                                </button>
                            ))}
                        </nav>

                        <div className="p-4 border-t border-ops-slate/30 bg-ops-bg/30">
                            <div className="flex items-center space-x-3">
                                <div className="w-8 h-8 bg-ops-slate text-ops-bg rounded-full flex items-center justify-center text-sm font-bold">
                                    {currentUser.name.charAt(0)}
                                </div>
                                <div>
                                    <div className="text-sm font-bold text-ops-white">{currentUser.name}</div>
                                    <div className="text-xs text-ops-slate uppercase tracking-wider">{currentUser.role} Access</div>
                                </div>
                            </div>
                        </div>
                    </aside>

                    {/* Main Content */}
                    <main className="flex-1 overflow-y-auto pt-20 lg:pt-8 px-4 lg:px-8 pb-8">
                        <header className="flex justify-between items-end mb-8 border-b border-ops-slate/20 pb-4">
                            <div>
                                <h1 className="text-2xl lg:text-3xl font-bold text-ops-white mb-1 font-mono uppercase tracking-tight">
                                    {currentUser.role} Dashboard
                                </h1>
                                <p className="text-ops-slate text-xs font-mono uppercase flex items-center tracking-wider">
                                    <Lock className="w-3 h-3 mr-1" />
                                    Secure Connection â€¢ Neutral Portfolio v2.5
                                </p>
                            </div>
                            <div className="hidden md:block">
                                <span className="bg-ops-slate/10 text-ops-light border border-ops-slate/30 px-3 py-1 text-xs font-mono uppercase">
                                    Term: Fall 2023
                                </span>
                            </div>
                        </header>

                        {renderView()}
                    </main>
                </div>
            );
        };

        const root = createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>